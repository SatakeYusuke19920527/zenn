---
title: 'Azure用語解説 Storage Queue/Service Bus/Event Hub/Event Grid '
emoji: '📘'
type: 'tech' # tech: 技術記事 / idea: アイデア
topics:
  [
    'Azure',
    'Azure Storage Queue',
    'Azure Service Bus',
    'Azure Event Hub',
    'Azure Event Grid',
  ]
published: true
---

# 📕Azure ざっくり用語解説 📕

以下の表は、Azure のキュー/バス/イベントハブ/イベントグリッドのそれぞれの機能や目的についての説明をまとめたものです。

| サービス            | 機能             | 目的                                                                                                                                                                |
| ------------------- | ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Azure Storage Queue | キュー           | メッセージングを使用して、アプリケーションのコンポーネント間で非同期通信を行うことができます。                                                                      |
| Azure Service Bus   | バス             | メッセージングおよびキューイングサービスであり、異なるアプリケーションおよびサービス間でメッセージを送受信することができます。                                      |
| Azure Event Hub     | イベントハブ     | 大規模なイベントストリームを受信し、処理するためのリアルタイムデータ収集サービスです。IoT やストリーム処理シナリオに使用されます。                                  |
| Azure Event Grid    | イベントグリッド | Azure サービスおよびカスタムアプリケーションのイベントを検出し、配信するサービスです。ロジックアプリや Azure Functions などのサービスをトリガーとして使用されます。 |

# 📕Azure 詳しく用語解説 📕

## Azure Storage Queue

Azure Storage Queue は、Azure の非同期メッセージングサービスで、アプリケーションのコンポーネント間で非同期通信を行うことができます。例えば、アプリケーション内の特定の処理を別のコンポーネントに委譲するときや、非同期処理が必要な場合に使用されます。

また、簡単にスケーリングできるため、アプリケーションの負荷が増加したときにも対応できます。また、可用性が高く、高い耐久性を備えているため、アプリケーションの信頼性を高めることができます。

加えて、REST API や.NET クライアントライブラリなどの多様なプログラミングインターフェイスを提供しています。これにより、アプリケーションの種類や開発言語に応じて選択できる柔軟性があります。

Azure Storage Queue は、以下のような特徴を持っています。

- シンプルで簡単に使用できる。
- エントリーポイントとして使用できる。
- 多数のクライアントに対応できる。
- ストレージアカウントの一部として管理される。
- データの耐久性と可用性が高い。
- メッセージの送信や受信に対する高速なレスポンスを提供する。
- サポートされるクライアントライブラリが多数あり、使用される言語やフレームワークに応じて選択できる。
- Azure Storage Queue は、その高いスケーラビリティ、信頼性、セキュリティ、パフォーマンス、および簡単な使用方法により、非同期メッセージングの需要が高い多くのアプリケーションで広く使用されています。

### Azure Storage Queue とは？

Azure Storage Queue を使用すると、アプリケーションの異なるコンポーネント間でメッセージを受信し、送信することができます。例えば、オンラインストアの注文処理システムを考えてみましょう。顧客が注文をすると、注文情報が Azure Storage Queue に送信されます。そして、注文処理システムは Azure Storage Queue から注文情報を受信し、注文を処理します。

## Azure Service Bus

Azure Service Bus は、異なるアプリケーションおよびサービス間でメッセージを送受信するためのメッセージングおよびキューイングサービスです。Azure Service Bus は、スケーラビリティ、耐久性、および信頼性が高く、広く使用されています。

次の 3 つの主要なコンポーネントがあります。

キュー: メッセージを順序立てて保持することができる。

トピック: パブリッシュ/サブスクライブパターンを使用し、メッセージの多数のサブスクライバーに配信することができる。

サブスクリプション: トピックに対して登録されたサブスクライバーの名前とアドレスを保持する。

Azure Service Bus は、メッセージングを使用して、異なるアプリケーションやコンポーネント、さらには異なるオンプレミスおよびクラウド環境間での通信を可能にするため、重要な役割を果たしています。

加えて多様なプログラミング言語とフレームワークに対応しており、REST API や.NET クライアントライブラリなどの多数のプログラミングインターフェイスを提供しています。また、セキュリティ機能も充実しており、アプリケーション間の通信を安全に保つことができます。

Azure Service Bus の主な特徴は以下のとおりです。

- スケーラビリティが高く、大量のメッセージを処理することができる。
- メッセージの保持と配信において高い耐久性を備えている。
- パブリッシュ/サブスクライブパターンを使用し、複数のサブスクライバーにメッセージを配信することができる。
- エンタープライズレベルのセキュリティ機能を提供し、通信を安全に保つことができる。
- 豊富なプログラミングインターフェイスが利用可能で、多様なプログラミング言語とフレームワークに対応している。
- Azure Service Bus は、高い信頼性とスケーラビリティが必要な多数のアプリケーションで広く使用されています。

### Azure Service Bus とは？

Azure Service Bus は、クラウド上で動作するマネージドメッセージングサービスです。これは、異なるアプリケーションやシステム間でメッセージを送受信するための基盤を提供します。

例えば、あなたの会社が顧客とやり取りする Web アプリケーションを持っているとします。このアプリケーションは、顧客から送信されたメッセージを処理し、サポートチームに転送する必要があります。また、サポートチームが顧客に返信をすると、その返信を Web アプリケーションに返す必要があります。

このような場合、Azure Service Bus を使用することで、Web アプリケーションとサポートチームの間でメッセージを安全かつ信頼性の高い方法でやり取りすることができます。Azure Service Bus は、メッセージをキューに格納し、1 つずつ順番に処理することができます。また、複数のサブスクライバーにメッセージを送信するためのトピックもサポートされています。

## Azure Event Hub

Azure Event Hub は、大量のイベントデータを収集、処理、配信するためのクラウドサービスです。Azure Event Hub は、高いスループット、スケーラビリティ、および耐久性があり、さまざまな業界でのビッグデータ分析や IoT アプリケーションなどで使用されています。

以下のような機能を提供しています。

イベントストリーム収集: IoT デバイスからのデータやログなどのイベントストリームを高いスループットで収集し、処理します。

イベントデータの保持: メッセージをストリームに保存し、耐久性が高く、多数のデバイスからのデータを保持することができます。

プロセッシング: 収集したデータをストリーム処理して、リアルタイムでアクションを実行することができます。

イベントデータの配信: 収集したデータを配信先のアプリケーションに配信することができます。

Azure Event Hub は、ストリーム処理を容易にするために、Apache Kafka プロトコルとの互換性を持っています。また、Azure Stream Analytics や Azure Functions など、多数の Azure サービスと統合されており、高度なイベント処理を実現することができます。

Azure Event Hub の主な特徴は以下のとおりです。

- 高いスループットで大量のデータを処理することができる。
- 多数のデバイスからのデータを収集し、耐久性が高いストリームデータを保持することができる。
- ストリームデータをリアルタイムで処理し、アクションを実行することができる。
- Apache Kafka プロトコルとの互換性を持っている。
- 多数の Azure サービスと統合されており、高度なイベント処理を実現することができる。
- Azure Event Hub は、高いスループットや耐久性が必要なビッグデータ処理や IoT アプリケーションに最適なクラウドサービスです。

### Azure Event Hubs とは？

Azure Event Hubs はビッグ データ ストリーミング プラットフォームであり、毎秒数百万のイベントを受け取って処理できるイベント インジェスト サービスです。 Event Hubs では、分散されたソフトウェアやデバイスから生成されるイベント、データ、またはテレメトリを処理および格納できます。

## Azure Event Grid

Azure Event Grid は、Azure の PaaS（Platform as a Service）サービスであり、Azure リソースやカスタムアプリケーションからのイベントの購読、フィルタリング、配信を可能にするイベントハブサービスです。Azure Event Grid は、サーバーレスコンピューティング、DevOps、IoT、およびビッグデータシナリオなど、様々なアプリケーションで使用されています。

Azure Event Grid は、以下のような機能を提供しています。

Azure リソースのイベント購読: Azure のリソースからのイベント（例えば、Azure Blob Storage、Azure Functions、Azure Event Hub など）を購読できます。

カスタムトピックのイベント購読: カスタムアプリケーションから生成されたイベントを、Event Grid を使用して購読することができます。

イベントのフィルタリング: サブスクライバーがイベントを受信する前に、Event Grid はイベントの内容を評価して、サブスクリプションに対してフィルタリングすることができます。

イベントの配信: Azure Event Grid は、Azure Functions や Logic Apps などのサーバーレスコンピューティングサービスにイベントを配信できます。

リアルタイムイベント配信: Event Grid は、リアルタイムでイベントを配信するための REST API を提供しています。

Azure Event Grid の主な特徴は以下のとおりです。

- Azure のリソースからのイベント購読が可能。
- カスタムトピックのイベント購読が可能。
- イベントのフィルタリングが可能。
- イベントの配信が可能。
- リアルタイムイベント配信に対応している。
- Azure Event Grid は、PaaS サービスに特化しており、サーバーレスコンピューティング、DevOps、IoT、およびビッグデータシナリオなど、多様なアプリケーションで使用されています。Azure リソースやカスタムアプリケーションからのイベントの購読、フィルタリング、配信を行いたい場合は、Azure Event Grid が最適な選択肢の一つとなるでしょう。

### Azure Event Grid とは？

さまざまなクラウドサービスやカスタムアプリなどから発生するイベントを取得して、処理を行うサービスが Azure の「Event Grid」です。特定のイベントをトリガーにして処理を起動できるようになり、業務対応の自動化やアラートの発報などに役立てることができます。

# Queue Storage と Service Bus Queue の違い

Azure のキューサービスには、Queue Storage と Service Bus Queue の 2 種類があります。

Queue Storage は前述の通り Azure ストレージサービスの一部ですが、Service Bus Queue は Azure Service Bus というサービス群の 1 つです。

Service Bus Queue は、例えば企業のシステム内でオンプレミスとクラウドベースのアプリケーションやデータなどを統合する際に利用できるもので、キューサービスとして Queue Storage よりも多機能であり複雑な処理が可能です。

双方とも利用目的は似ていますが、Azure Service Bus のキューサイズは最大 80GB で、最大メッセージサイズは 256KB であるといった違いがあります。

Azure Queue Storage と Azure Service Bus Queue は、両方とも Azure のメッセージングサービスですが、異なる使用シナリオに最適化されています。

Azure Queue Storage は、シンプルなメッセージキューを提供するサービスで、分散システムでメッセージングを行う場合に使用されます。一方、Azure Service Bus Queue は、高度なメッセージング機能を提供するメッセージングサービスで、高信頼性のあるエンタープライズシステムで使用されます。

以下に Queue Storage と Service Bus Queue の違いをまとめます。

メッセージのサイズと期限: Azure Queue Storage は、最大 64 KB のメッセージをサポートし、1 週間以内に期限が切れるメッセージを削除します。一方、Azure Service Bus Queue は、最大 256 KB のメッセージをサポートし、7 日以上の期限を持つメッセージを保存できます。

配信保証: Azure Queue Storage は、最大で少数の重複メッセージを許容しますが、順序は保証されません。Azure Service Bus Queue は、最大 10 回の自動リトライと重複排除をサポートし、先入れ先出順序を保証します。

メッセージの順序: Azure Queue Storage は、メッセージの順序は保証されません。Azure Service Bus Queue は、メッセージの順序を保証するために、セッション ID を使用して同じセッション内のメッセージを処理することができます。

プロトコル: Azure Queue Storage は、REST API を使用してアクセスします。Azure Service Bus Queue は、REST API、AMQP、および SBMP プロトコルをサポートします。

フィルタリング: Azure Service Bus Queue は、SQL フィルタリングをサポートし、受信するメッセージをフィルタリングすることができます。Azure Queue Storage は、フィルタリング機能をサポートしていません。

したがって、Azure Queue Storage はシンプルなキューを使用する場合に最適であり、Azure Service Bus Queue はより高度な機能が必要な場合に最適です。

# Event Grid と Event Hubs の違い

Event Grid と Event Hubs は、Azure のイベント処理に関連する 2 つのサービスですが、それぞれ異なる目的で使用されます。

Event Grid は、イベントのパブリッシュ/サブスクライブモデルに基づくイベント配信サービスです。Event Grid を使用すると、アプリケーションは、イベントを発生させ、Event Grid に送信することができます。その後、イベントに関心のあるすべてのサブスクライバーにイベントが配信されます。Event Grid は、アプリケーションの解耦を改善するために使用されることがあります。

一方、Event Hubs は、大量のデータを処理するためのスケーラブルなデータストリーミングプラットフォームです。Event Hubs を使用すると、アプリケーションは、イベントをストリームに送信し、後で処理することができます。Event Hubs は、複数のサービスやアプリケーション間でデータを共有するために使用されることがあります。

つまり、Event Grid はイベントの配信、Event Hubs はデータストリームの処理のために使用されます。

# 最後に

完全に理解できたと言いたい。
