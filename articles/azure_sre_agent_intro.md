---
title: 'SREの仕事をAI Agentに任せて人間はゆっくりする会☕️'
emoji: '☕️'
type: 'tech' # tech: 技術記事 / idea: アイデア
topics: ['SRE', 'AI Agent', 'Azure', 'Microsoft', 'AzureSREAgent']
published: true
publication_name: microsoft
---

![](https://storage.googleapis.com/zenn-user-upload/021836dd1244-20250717.png)

# はじめに

昨今の AI Agent の普及は驚くほどのスピードで進んでいます。業務アプリケーションに組み込まれるエージェントや、最近話題の MCP（Model Context Protocol）で様々なデータソースに自由にアクセス出来るようになったエージェント、そして開発生産性を押し上げる GitHub Copilot Agent など、「人が指示 →AI が調査 → 提案 → 実行支援」というワークスタイルが現実味を帯びてきました。

今後は AI Agent をあらゆるサービス・業務で利活用し、人間がよりクリエイティブな仕事に集中できるようになることが期待されています。

本記事では AI Agent の一つのユースケースとして、SRE (Site Reliability Engineering) の仕事を AI Agent に任せてみる記事となります。
SRE は サイト信頼性エンジニアリングと言われ、運用をソフトウェアの問題として扱うことで実現します。
ソフトウェアとシステムを、可用性、レイテンシ、パフォーマンス、キャパシティを常に注意深く監視しながら保護、維持、発展させる仕事です。

SRE の仕事は IT 業界では非常に重要な役割を担っているので、この Agent が世の中に普及すれば、多くの人が監視や運用の仕事から解放され、よりクリエイティブな仕事に集中できるようになる(もしくはゆっくりコーヒー ☕️ でも飲む)ことを夢見て書いた記事となります。

SRE の基本的な概念や役割から、AI Agent を活用して SRE の業務を任せてみるところまで記載しておりますので、ぜひ楽しんでいただければと思います。

それでは、始めましょう 🚀

# そもそも SRE ってなに？

SRE（Site Reliability Engineering）は、システム管理とサービス開発運用に関連するプラクティスで、サイトとサービスの信頼性に重きを置いたエンジニアリングのことです。

SRE は、手間のかかる運用面をプログラムに任せて自動化し、ユーザーが満足できるサービスレベルを維持しながら、ソフトウェアサイクルをさらに高速化してシステムとビジネスのアジリティを高める取り組みを指します。

つまり、SRE を一言で表現すると「システム開発運用の DX」と言っても過言ではありません。

現代では、多くのビジネスがデジタル化され、Web サイトや Web アプリケーションを通じてサービスが提供されています。システムの信頼性や安定性はビジネスに直結するため、新機能の追加や更新だけではなく、エラー発生の抑制や障害復旧の短期化、事業の拡大・縮小に迅速に追従することなども重視しなくてはなりません。

そこで、**不具合を検知して原因究明から対策までの時間を大幅に短縮することができれば**、エンジニアは障害対応にかけていた時間を新機能の開発やブラッシュアップといった、よりクリエイティブな業務に注力できるようになります。

さらにいえば、あらかじめシステムをスケーリングするように設計しておくことで、ビジネスの拡大とともにシステムをスケールさせる必要が出てきたときに、そこに関わる人手と時間を大幅に圧縮できます。

プログラミングは人間が楽になるために組み込まれたものであるにもかかわらず、その運用には多くの人手がかかっているのが現状です。それを変えるのが SRE なのです。

そして今回の記事では、その SRE でさえも AI Agent にまかせてしまおうという内容になります。

# SRE の役割

SRE が担う典型的な内容を整理すると以下のようになります。

| 領域                     | 具体的な活動例                                       | 目的                            |
| ------------------------ | ---------------------------------------------------- | ------------------------------- |
| 可用性・稼働率管理       | SLO 策定、エラーバジェット運用、冗長化設計           | サービス停止を最小化            |
| パフォーマンス最適化     | レイテンシ測定、スケーリング、キャッシュ戦略         | 応答時間改善とコスト最適化      |
| キャパシティプランニング | 需要予測、オートスケール設定                         | 過負荷/過剰プロビジョニング回避 |
| 変更管理 & リリース      | カナリア、ブルー/グリーン、リリースガードレール      | 変更に伴う障害リスク抑制        |
| インシデント対応         | 検知 → エスカレーション → 緩和 → 復旧 → 事後レビュー | MTTR 短縮と再発防止             |
| トイル削減 & 自動化      | 繰り返し作業のスクリプト化/エージェント化            | 人的負荷軽減・スケール          |
| オブザーバビリティ       | メトリック/ログ/トレース統合、ダッシュボード         | 状態の可視化と素早い原因特定    |

こうした領域の相当部分は「観察 → 判断 → アクション」であり、人間が実施すると非常に技術力と経験が求められ、各社 SRE を担当する方に業務が属人化するという現象が発生します。
ここで考えられているのが、AI Agent による支援・自動化と親和性が極めて高いということです。

# AI Agent 活用の潮流と SRE

昨今の AI エージェントは、運用データ（メトリック／ログ／イベント）を LLM ベースで要約・推論し、自然言語で対話しながら修復アクションを提案・実行する方向に急速進化しています。Microsoft は Build 2025 で Azure SRE Agent を発表し、インシデント検出から診断、協働復旧に至るプロセスの高速化を狙うソリューションを提示しました。

https://techcommunity.microsoft.com/blog/azurepaasblog/introducing-azure-sre-agent/4414569

この発表を見た筆者は、「これでトイルが減る」「SRE の仕事が変わる」「AI が SRE を全部やる時代？」と一人の頭の中で盛り上がりを見せています。

一人だけ盛り上がっていると恥ずかしいので、皆さんにも是非体感していただき、盛り上がっていただきたいのがこの記事の趣旨となります。

# Azure SRE Agent とは

https://youtu.be/teVBlz3UTg0

Azure 上のリソース群（App Service, Container Apps, Functions, AKS, Azure Database for PostgreSQL 等）を対象に、AI が継続的ヘルス評価・アラート推奨・インシデント診断・復旧支援を行うマネージドサービス（現在プレビュー）です。

エージェントは関連付けたリソースグループ内のリソースへアクセスし、活動状況を評価して不健全・不安定なアプリを事前通知します。また Azure Monitor Alerts や PagerDuty と統合して高度な通知＆エスカレーションを実現することが出来ます。

https://learn.microsoft.com/ja-jp/azure/sre-agent/

**プレビュー注意**: 現在プレビュー中で、作成リージョンは _Sweden Central_ に制限されていますが、監視対象リソースは他リージョンでも可。仕様は変更される可能性があります。

# Azure SRE Agent の主要機能

以下、公式ドキュメントとプレビュー版で確認できる代表機能をダイジェストで紹介します。
https://learn.microsoft.com/ja-jp/azure/sre-agent/overview

## ウェルカム スレッド:

エージェントを最初に作成すると、サービスの初期分析を提供する新しいスレッドが作成されます。 環境分析では、エージェントによって管理されているすべてのリソースのスナップショットが作成されます。 さらに、エージェントは、マネージド リソース グループ内にあるアプリケーションの一覧を生成します。

## 毎日のスレッド:

エージェントは毎日、マネージド リソース グループ内のサービスの状態と状態をまとめたリソース レポートを作成します。

## ツール:

Azure CLI と Kubectl を使用したクエリと操作のサポート。

## データ ソース:

Azure Resource Manager API と Azure Monitor メトリック データ ソースへのアクセス。

## インシデント管理:

エージェントと直接チャットするか、インシデント管理プラットフォームをエージェントに接続して、インシデントを診断します。 初期分析を使用して、Azure Monitor アラートまたは PagerDuty インシデントに自動的に応答します。

## プロアクティブな監視:

潜在的な問題に対するリアルタイムアラートによる継続的な 24 時間 365 日のリソース監視。

## 自動化された軽減策:

一般的な問題の自動検出と軽減、ダウンタイムの短縮、リソースの正常性の向上。 エージェントはユーザーに代わって作業を試みますが、すべての自動化には承認が必要です。

## インフラストラクチャのベスト プラクティス:

セキュリティのベスト プラクティスに従っていないリソースを特定して修復し、更新を支援します。

## 根本原因分析を高速化します。

メトリックとログを分析してアプリの問題の根本原因を診断し、軽減策を提案します。

## リソースの視覚化:

リソースの依存関係と正常性状態の包括的なビューを提供します。
![](https://storage.googleapis.com/zenn-user-upload/ff6d47dba9fc-20250717.png)

## 軽減策のサポート:

SRE エージェントは、アプリケーション構成と依存サービスを修正できます。 コードの問題の場合、エージェントはスタック トレースを提供し、問題の解決に役立つ GitHub の問題を作成できます。 次の項目では、エージェントのサービス固有の機能について説明します。

- Azure App Service: デプロイのロールバック、リソースのスケールアップ/スケールダウン、アプリケーションの再起動。
- Azure Container Apps: デプロイのロールバック、リソースのスケールアップ/スケールダウン、アプリケーションの再起動。
- Azure Kubernetes Service: ポッド/デプロイの再起動、以前のリビジョンへのデプロイのロールバック、リソースのスケールアップ/ダウン、およびリソース定義の修正プログラムの適用。

# SRE 業務を AI Agent に任せてみるハンズオン

## SRE Agent が監視する Web アプリを作成

監視対象のリソースグループを作成します。
![](https://storage.googleapis.com/zenn-user-upload/04e0f83f8b03-20250719.png)

App Services を検索して Web アプリを選択
設定は以下のような感じに。
※価格プランは Standard 以上を選択してください。
![](https://storage.googleapis.com/zenn-user-upload/54b9a9103757-20250719.png)
![](https://storage.googleapis.com/zenn-user-upload/9b46e7e57a86-20250719.png)

基本認証を有効にするを選択   て後は Default で OK
![](https://storage.googleapis.com/zenn-user-upload/10d7ec15fd63-20250719.png)

Deploy してください。

アプリケーションは以下のリポジトリのものを利用します。
https://github.com/Azure-Samples/app-service-dotnet-agent-tutorial

Deploy 出来たら、Azure portal で、[リソースに移動] を選択して、新しく作成した App Service に移動します。左側のメニューの [ 展開 ] セクションで、[ 展開センター] を選択します。
[ 設定] タブで、次の構成を行います。
![](https://storage.googleapis.com/zenn-user-upload/ff8759e1ad1f-20250719.png)

[保存] を選択してデプロイ設定を適用します。

## Web アプリを確認

デプロイ後、サンプル アプリが想定どおりに実行されていることを確認します。
App Service の左側のメニューで、[ 概要] を選択します。
[ 参照 ] を選択して、新しいブラウザー タブでアプリを開きます (読み込みに 1 分かかる場合があります)。
アプリには、大きなカウンターと 2 つのボタンが表示されます。

![](https://storage.googleapis.com/zenn-user-upload/6bc92256b57e-20250719.png)

こんな感じの.NET9 で作られた簡単なアプリです。

## 障害シミュレーションようのデプロイスロットの設定

アプリの障害シナリオをシミュレートするには、セカンダリ デプロイ スロットを追加します。
App Service の左側のメニューの [ デプロイ ] セクションで、[ デプロイ スロット] を選択します。
[ スロットの追加] を選択します。
次の値を入力します。
![](https://storage.googleapis.com/zenn-user-upload/d7f78e5edd13-20250719.png)

## サンプル アプリをスロットにデプロイする

スロットが作成されたら、一覧から broken スロットを選択します。
左側のメニューの [ 展開 ] セクションで、[ 展開センター] を選択します。
[ 設定] タブで、次の構成を行います。

![](https://storage.googleapis.com/zenn-user-upload/849a9134dc3e-20250719.png)

## エラー シミュレーションを有効にするアプリ設定を追加する

エラー シミュレーションを制御するには、実行時にアプリがチェックするアプリ設定を構成します。
App Service の左側のメニューで、[設定] セクションの [環境変数] を選択します。
上部で、正しいスロット（例えば、broken）が選択されていることを確認します。
[ アプリの設定 ] タブで、[ + 追加] を選択します。

次の値を入力します。
![](https://storage.googleapis.com/zenn-user-upload/2c36d4f3e382-20250719.png)

## SRE Agent を作成

SRE Agent の画面はこちら。
![](https://storage.googleapis.com/zenn-user-upload/e94b1000f4fd-20250719.png)

先ほど作成した監視対象のアプリケーションが所属するリソースグループを選択します。
![](https://storage.googleapis.com/zenn-user-upload/f37ce23b93ef-20250719.png)

SRE Agent を作成してください。
![](https://storage.googleapis.com/zenn-user-upload/6bcbd6b57075-20250719.png)

細かな設定は以下となります。
![](https://storage.googleapis.com/zenn-user-upload/555ad2222e4d-20250719.png)

Azure SRE Agent の画面はこんな感じです。チャットベースの画面ですね。
![](https://storage.googleapis.com/zenn-user-upload/32244bd5b22b-20250719.png)

## SRE Agent とチャットしてみる。

まずは、以下のメッセージを入力します。監視している App Service の一覧を取得してもらいましょう。

> List my App Service apps

![](https://storage.googleapis.com/zenn-user-upload/167e00a8e5a6-20250719.png)

素晴らしいですね。
しっかりと返してくれました。

## アプリに障害を起こしてみる

次に壊れたデプロイ スロットにスワップして、障害シナリオをシミュレートします。
App Service で、左側のメニューの [デプロイ ] セクションに移動し、[ デプロイ スロット] を選択します。
[ スワップ] を選択します。
[ スワップ ] ダイアログで、次の構成を行います。

Swap をクリック
![](https://storage.googleapis.com/zenn-user-upload/a7972c9a64c6-20250719.png)

Source を障害があるスロットに、Target を現在の正常なスロットを選択します。
![](https://storage.googleapis.com/zenn-user-upload/c67cdfe18f2b-20250719.png)

では、Start Swap で障害を起こしてみましょう。

![](https://storage.googleapis.com/zenn-user-upload/2053171d3b56-20250719.png)

インクリメントボタンを 6 回選択して、HTTP 500 エラーが返されることを確認します。

そして、SRE Agent に障害を検知してもらいましょう！

> What's wrong with my-sre-app?

以下のようなメッセージが返ってきます。

> "スロットをスワップバックしてアプリケーションを正常な状態に回復することで、my-sre-app の軽減策を実行します。 スロットをスワップバックすると、常にすぐに正常性が復元されるわけではないことに注意してください。 私は進行状況を更新し続けます。

承認をクリックしてロールバックしてみます。

最後にもう一回、状態を確認してみましょう！

> What's wrong with my-sre-app?

![](https://storage.googleapis.com/zenn-user-upload/6eeb40beba9c-20250719.png)

healthy な状態に戻りましたね。

SRE Agent が障害を検知して、ロールバックまで自動で行ってくれました。

ハンズオンは以上になります。

お疲れ様でした！

# まとめ

今回は SRE 業務を AI Agent に任せてみるというテーマで、Azure SRE Agent を使ったハンズオンを行いました。
AI Agent が SRE 業務を支援することで、障害検知から復旧までの時間と労力を大幅に短縮できることを体感していただけたかと思います。

まだ、private preview の Azure SRE Agent ですが、今後の Update でさらに多くのシナリオで活用できるようになることが期待しています。

様々な業務が AI Agent が代替してくれて、人間はよりクリエイティブな仕事に集中できる未来が来ることを願っています。

それでは 🖐️

# 参考資料

https://learn.microsoft.com/ja-jp/training/modules/intro-to-site-reliability-engineering/
https://learn.microsoft.com/ja-jp/azure/sre-agent/troubleshoot-azure-app-service
